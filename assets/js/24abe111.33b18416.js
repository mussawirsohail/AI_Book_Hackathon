"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2540],{5864:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"modules/module-1-ros2/lesson-2-nodes-topics-services","title":"Lesson 2: ROS 2 Nodes, Topics, and Services","description":"Understanding Nodes","source":"@site/docs/modules/module-1-ros2/lesson-2-nodes-topics-services.md","sourceDirName":"modules/module-1-ros2","slug":"/modules/module-1-ros2/lesson-2-nodes-topics-services","permalink":"/AI_Book_Hackathon/docs/modules/module-1-ros2/lesson-2-nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/mussawirsohail/AI_Book_Hackathon/docs/modules/module-1-ros2/lesson-2-nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2}}');var i=n(4848),o=n(8453);const t={sidebar_position:2},l="Lesson 2: ROS 2 Nodes, Topics, and Services",a={},c=[{value:"Understanding Nodes",id:"understanding-nodes",level:2},{value:"Creating a Node in Python",id:"creating-a-node-in-python",level:3},{value:"Topics and Message Passing",id:"topics-and-message-passing",level:2},{value:"Creating a Publisher",id:"creating-a-publisher",level:3},{value:"Creating a Subscriber",id:"creating-a-subscriber",level:3},{value:"Services",id:"services",level:2},{value:"Creating a Service Server",id:"creating-a-service-server",level:3},{value:"Creating a Service Client",id:"creating-a-service-client",level:3},{value:"Quality of Service (QoS)",id:"quality-of-service-qos",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"lesson-2-ros-2-nodes-topics-and-services",children:"Lesson 2: ROS 2 Nodes, Topics, and Services"})}),"\n",(0,i.jsx)(r.h2,{id:"understanding-nodes",children:"Understanding Nodes"}),"\n",(0,i.jsx)(r.p,{children:"In ROS 2, a node is the fundamental unit of computation. Each node is typically responsible for a specific task such as controlling a sensor, processing data, or controlling actuators. Nodes are designed to be as lightweight as possible and communicate with each other via messages."}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-node-in-python",children:"Creating a Node in Python"}),"\n",(0,i.jsx)(r.p,{children:"Here's how to create a basic ROS 2 node using the rclpy client library:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MyRobotNode(Node):\r\n    def __init__(self):\r\n        super().__init__('my_robot_node')\r\n        self.get_logger().info('MyRobotNode has been started')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = MyRobotNode()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.h2,{id:"topics-and-message-passing",children:"Topics and Message Passing"}),"\n",(0,i.jsx)(r.p,{children:"Topics enable asynchronous communication between nodes using a publish-subscribe model. This decouples nodes from each other, making the system more modular and flexible."}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-publisher",children:"Creating a Publisher"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n        self.publisher = self.create_publisher(String, 'topic', 10)\r\n        timer_period = 0.5\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = 'Hello World'\r\n        self.publisher.publish(msg)\r\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n"})}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-subscriber",children:"Creating a Subscriber"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,i.jsx)(r.h2,{id:"services",children:"Services"}),"\n",(0,i.jsx)(r.p,{children:"Services provide synchronous request/response communication. A node offering a service waits for requests and sends back responses."}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-service-server",children:"Creating a Service Server"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from add_two_ints_srv.srv import AddTwoInts\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MinimalService(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_service')\r\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\r\n\r\n    def add_two_ints_callback(self, request, response):\r\n        response.sum = request.a + request.b\r\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\r\n        return response\n"})}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-service-client",children:"Creating a Service Client"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from add_two_ints_srv.srv import AddTwoInts\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MinimalClientAsync(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_client_async')\r\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\r\n        while not self.cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Service not available, waiting again...')\r\n        self.req = AddTwoInts.Request()\r\n\r\n    def send_request(self, a, b):\r\n        self.req.a = a\r\n        self.req.b = b\r\n        self.future = self.cli.call_async(self.req)\r\n        rclpy.spin_until_future_complete(self, self.future)\r\n        return self.future.result()\n"})}),"\n",(0,i.jsx)(r.h2,{id:"quality-of-service-qos",children:"Quality of Service (QoS)"}),"\n",(0,i.jsx)(r.p,{children:"ROS 2 provides Quality of Service profiles that allow you to configure how data is delivered between publishers and subscribers, which is important for real-time and safety-critical applications."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from rclpy.qos import QoSProfile\r\n\r\n# Configure QoS for real-time applications\r\nqos_profile = QoSProfile(depth=10)\r\nqos_profile.reliability = rclpy.qos.ReliabilityPolicy.RELIABLE\r\nqos_profile.durability = rclpy.qos.DurabilityPolicy.VOLATILE\r\n\r\n# Create publisher with custom QoS\r\npublisher = self.create_publisher(String, 'topic', qos_profile)\n"})}),"\n",(0,i.jsx)(r.p,{children:"In the next lesson, we'll learn how to bridge Python agents to ROS controllers using rclpy."})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>l});var s=n(6540);const i={},o=s.createContext(i);function t(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);